(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ff776b0"],{4320:function(t,e,n){"use strict";n.r(e);n("4343"),n("260b"),n("5671");var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-content"},[e("breadcumb",{attrs:{page:"Domains",folder:"Dashboard"}}),e("vue-good-table",{attrs:{columns:t.columns,"line-numbers":!0,"search-options":{enabled:!0,placeholder:"Search this table"},"pagination-options":{enabled:!0,mode:"records"},styleClass:"tableOne vgt-table",selectOptions:{enabled:!1,selectionInfoClass:"table-alert__box"},rows:t.rows},scopedSlots:t._u([{key:"table-row",fn:function(n){return["button"==n.column.field?e("span",[e("a",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-edit",modifiers:{"modal-edit":!0}}],attrs:{href:"#",block:""},on:{click:function(e){return t.editDomain(n.row.id)}}},[e("span",{staticClass:"ul-btn__icon"},[e("i",{staticClass:"i-Eraser-2 text-20 text-success mr-2"})]),t._v(" "+t._s(n.row.button)+" ")]),e("a",{attrs:{href:"#"},on:{click:function(e){return t.removeDomain(n.row.id)}}},[e("i",{staticClass:"i-Close-Window text-20 text-danger"}),t._v(" "+t._s(n.row.button)+" ")])]):t._e()]}}])},[e("div",{staticClass:"mb-3",attrs:{slot:"table-actions"},slot:"table-actions"},[e("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-add",modifiers:{"modal-add":!0}}],staticClass:"btn-rounded",attrs:{block:"",variant:"primary mb-30"},on:{click:function(e){return t.editDomain(-1)}}},[t._v(" + Add New Domain ")]),e("b-modal",{attrs:{id:"modal-add",centered:"",title:"Add New Domain"},on:{ok:t.addDomain,cancel:t.refresh}},[e("b-form",{attrs:{id:"form-add"}},[e("b-form-group",{attrs:{id:"input-group-1","label-for":"input-1"}},[e("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"domain name....",required:""},model:{value:t.domainForm.name,callback:function(e){t.$set(t.domainForm,"name",e)},expression:"domainForm.name"}})],1),e("b-form-group",[e("b-form-textarea",{attrs:{id:"textarea",placeholder:"Description...",rows:"3"},model:{value:t.domainForm.description,callback:function(e){t.$set(t.domainForm,"description",e)},expression:"domainForm.description"}})],1)],1)],1)],1)]),e("b-modal",{attrs:{id:"modal-edit",centered:"",title:"Edit Domain"},on:{ok:t.saveDomain,cancel:t.refresh}},[e("b-form",{attrs:{id:"form-edit"}},[e("b-form-group",{attrs:{id:"input-group-edit","label-for":"input-2"}},[e("b-form-input",{attrs:{id:"input-edit",type:"text",placeholder:"domain name....",required:""},model:{value:t.domainForm.name,callback:function(e){t.$set(t.domainForm,"name",e)},expression:"domainForm.name"}})],1),e("b-form-group",[e("b-form-textarea",{attrs:{id:"textarea-edit",placeholder:"Description...",rows:"3"},model:{value:t.domainForm.description,callback:function(e){t.$set(t.domainForm,"description",e)},expression:"domainForm.description"}})],1)],1)],1),e("div",{staticClass:"row mb-30"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"table-bottom large-12 medium-12 small-12 cell"},[e("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(e){return t.downloadCSV()}}},[t._v("Download")])],1)]),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card"},[e("div",{staticClass:"card-body"},[e("h4",{staticClass:"heading"},[t._v("CSV Upload")]),e("div",{staticClass:"table-bottom large-12 medium-12 small-12 cell"},[e("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(e){return t.handleFileUpload()}}}),e("b-button",{staticClass:"float-right",attrs:{variant:"primary"},on:{click:function(e){return t.uploadCSV()}}},[t._v("Upload")])],1)])])])])],1)},r=[],o=(n("331d"),n("5384"),n("db18"),n("8b8a"),n("0ba6"),n("a6de"),n("d13e"),n("1725"),n("f1de"),n("f56d"),n("fcb3"),n("ab11"),n("ad0f"),n("22dd"),n("3d0d")),i=n("c868"),s=n("2934");function c(){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])("/domain/all/",{method:"GET"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function l(){return u.apply(this,arguments)}function u(){return u=Object(i["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])("/domain/export-csv/",{method:"GET",headers:{"Content-Type":"blob",Accept:"application/json"},responseType:"blob"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),u.apply(this,arguments)}function m(t){return p.apply(this,arguments)}function p(){return p=Object(i["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["a"])("/domain/import-csv/","POST",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),p.apply(this,arguments)}function f(t){return b.apply(this,arguments)}function b(){return b=Object(i["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])("/domain/create/","POST",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),b.apply(this,arguments)}function h(t){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(Object(o["a"])().mark((function t(e){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["d"])("/domain/".concat(e,"/"),{method:"DELETE"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),v.apply(this,arguments)}function w(t,e){return x.apply(this,arguments)}function x(){return x=Object(i["a"])(Object(o["a"])().mark((function t(e,n){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["c"])("/domain/".concat(e,"/"),"PUT",n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),x.apply(this,arguments)}var C={metaInfo:{title:"Dashboard domains"},data:function(){var t={columns:[{label:"Domain Name",field:"name",thClass:"text-left",tdClass:"text-left"},{label:"Description",field:"description",html:!0,thClass:"text-left",tdClass:"text-left"},{label:"Actions",field:"button",html:!0,tdClass:"text-right",thClass:"text-right"}],rows:[],file:"",domainForm:[{id:-1,name:"",description:"",created_at:""}]};return this.refresh(),t},methods:{refresh:function(){var t=this;c().then((function(e){t.rows=[],e.forEach((function(e,n){var a=e.id,r=e.name,o=e.description,i=e.updated_at;t.rows.push({id:a,name:r,description:o,updated_at:i})}))}))},downloadCSV:function(t){var e=null;l().then((function(t){return 200===t.status?(e=t.headers.get("Content-Disposition"),e&&(e=e.match(/(?<=")(?:\\.|[^"\\])*(?=")/)[0]),t.blob()):null})).then((function(t){var n=window.URL.createObjectURL(new Blob([t],{type:"text/csv;charset=utf-8;"})),a=document.createElement("a");a.href=n,a.setAttribute("download",e||"domains.csv"),document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(n)})).catch((function(t){console.log("error: ",t)}))},uploadCSV:function(){var t=new FormData;t.append("file",this.file),t.append("fileName",this.file.name);var e=this;m(t).then((function(){e.refresh()})).catch((function(t){console.log("FAILURE: ",t)}))},handleFileUpload:function(){this.file=this.$refs.file.files[0]},addDomain:function(){var t=this.domainForm,e=t.name,n=t.description,a=this;e&&f({name:e,description:n}).then((function(t){a.$bvModal.hide("modal-add"),a.refresh()})).catch((function(t){console.log("===== error: ",t)}))},editDomain:function(t){if(-1===t)this.domainForm=[{id:-1,name:"",description:"",created_at:""}];else{var e=this.rows.find((function(e){return e.id===t}));this.domainForm=e}},saveDomain:function(){var t=this,e=this.domainForm,n=e.name,a=e.description;w(this.domainForm.id,{name:n,description:a}).then((function(e){t.$bvModal.hide("modal-edit"),t.refresh()})).catch((function(t){console.log("===== error: ",t)}))},removeDomain:function(t){var e=this;h(t).then((function(t){e.refresh()})).catch((function(t){console.log("===== error: ",t)}))}}},O=C,j=(n("c7df"),n("829d")),g=Object(j["a"])(O,a,r,!1,null,null,null);e["default"]=g.exports},b675:function(t,e,n){},c7df:function(t,e,n){"use strict";n("b675")}}]);